<title>{% block title  %}Filme{% endblock %}</title>
 <!DOCTYPE html>
 <html>
 <head>
    
        
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Website - recomandare filme</title> 
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" /> 
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
            integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
            crossorigin="anonymous"
        />

        
        <link

    <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" 
    crossorigin="anonymous">
    </script>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="static/css/styles.css" rel="stylesheet" /> 

        <style>
            body {
              background-image: url('/static/image.png');
              background-repeat: no-repeat;
              background-size: cover;
              
            }
          </style> 
         
    
</head>



<body id="page-top">
    
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                MENU
                <i class="fas fa-bars ms-1"></i>
            </button>
        
            <div class="collapse navbar-collapse justify-content-start" id="navbarResponsive">
                <div class="d-flex">  
                    <ul class="navbar-nav">
                        <a class="nav-item nav-link align-self-start" id="home" href="/home">Acasă</a>
                        <a class="nav-item nav-link align-self-start" id="form" href="/formular">Formular</a>
                        <a class="nav-item nav-link align-self-start" id="form" href="/formular_rezultate">Recomandari</a>
                        <a class="nav-item nav-link align-self-start" id="filme" href="/filme">Filme și Seriale</a>
                       <!-- <a class="nav-item nav-link align-self-start" id="logout" href="/logout">Logout</a> -->
                        
                    </ul>
                </div>
            </div>
            <div class="collapse navbar-collapse justify-content-end" id="navbarResponsive">
                <ul class="navbar-nav ">

                    {% if email %}

                    <li><a class="nav-item nav-link" id ="home" href="/logout">Delogare ({{ email }}) </a></li>
                
                {% else  %}
                    <li><a class="nav-item nav-link" id ="login">Nu sunteți logat! </a></li>
                {% endif %}
                </ul>	
                    
<!--
                    <a class="nav-item nav-link" id="about" href="/about">About</a>
                    <a class="nav-item nav-link "id="contact" href="/contact">Contact</a -->
                </ul>		  
                
            </div>
        

       
       </div>
    </nav>

  <br><br><br><br><br><br><br>  
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                {% if category == 'error'%}
                    <div class="alert alert-danger alert-dismissible fade show">
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                         {{ message }}
                        
                    </div>
                {% else %}
                    <div class="alert alert-success alert-dismissible fade show">
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                         {{ message }}
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endwith %} 

    <style>
        * {
          box-sizing: border-box;
        }
        
        /* Create three equal columns that floats next to each other */
        .column {
          float: left;
          width: 30%;
          padding: 10px;
          height: 500px;
        }
        
        /* Clear floats after the columns */
        .row:after {
          content: "";
          display: table;
          clear: both;
        }
    </style>

    <style>
        /* Stiluri CSS pentru aspectul dropdown-ului */
        .dropdown {
        position: relative;
        display: inline-block;
        }

        .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 200px;
        border: 1px solid #ddd;
        padding: 10px;
        }

        .dropdown:hover .dropdown-content {
        display: block;
        }
    </style>




    </head>
    <body>

        


        <div style="margin-left: 10px;">
            
           

                <div class="search-box">
                    <label><b>Filtre de căutare:  </b></label>
                    <input type="text"  id="searchInput1" class="transparent-input" onkeyup="searchList()" placeholder="Căutați un titlu...">
                    <input type="text"  id="searchInput2" class="transparent-input" onkeyup="searchList2()" placeholder="Introduceți anul...">
                    
                
                    <div class="dropdown">
                            <button class="dropbtn transparent-button">Selectați actorii</button>
                            <div class="dropdown-content" onchange="searchList3()">
                                <select id="actorDropdown" class="transparent-dropdown" size="17" multiple onchange="searchList3()">
                                    <option value="Christian Bale">Christian Bale</option>
                                    <option value="Elijah Wood">Elijah Wood</option>
                                    <option value="Al Pacino">Al Pacino</option>
                                    <option value="Sigourney Weaver">Sigourney Weaver</option>
                                    <option value="Anthony Perkins">Anthony Perkins</option>
                                    <option value="Chanchal Chowdhury">Chanchal Chowdhury</option>
                                    <option value="Roberto Benigni">Roberto Benigni</option>
                                    <option value="Tom Hanks">Tom Hanks</option>
                                    <option value="Ryunosuke Kamiki">Ryunosuke Kamiki</option>
                                    <option value="Matthew Broderick">Matthew Broderick</option>
                                    <option value="Shameik Moore">Shameik Moore</option>
                                    <option value="Mark Hamill">Mark Hamill</option>
                                    <option value="Liam Neeson">Liam Neeson</option>
                                    <option value="Ranganathan Madhavan">Ranganathan Madhavan</option>
                                    <option value="Mel Gibson">Mel Gibson</option>
                                    <option value="Dwayne Johnson">Dwayne Johnson</option>
                                    <option value="Dave Bautista">Dave Bautista</option>

                                    <!-- Adăugați mai mulți actori în funcție de nevoile dvs. -->
                                </select>
                            </div>
                    </div> 

                    <div class="dropdown">
                        <button class="dropbtn transparent-button">Selectați directorii</button>
                        <div class="dropdown-content" onchange="searchList4()">
                            <select id="directorDropdown" class="transparent-dropdown" size="18" multiple onchange="searchList4()">
                                <option value="Christopher Nolan">Christopher Nolan</option>
                                <option value="Peter Jackson">Peter Jackson</option>
                                <option value="Francis Ford Coppola">Francis Ford Coppola</option>
                                <option value="Ridley Scott">Ridley Scott</option>
                                <option value="Alfred Hitchcock">Alfred Hitchcock</option>
                                <option value="Amitabh Reza Chowdhury">Amitabh Reza Chowdhury</option>
                                <option value="Roberto Benigni">Roberto Benigni</option>
                                <option value="Robert Zemeckis">Robert Zemeckis</option>
                                <option value="Makoto Shinkai">Makoto Shinkai</option>
                                <option value="Roger Allers">Roger Allers</option>
                                <option value="Bob Persichetti">Bob Persichetti</option>
                                <option value="Irvin Kershner">Irvin Kershner</option>
                                <option value="George Lucas">George Lucas</option>
                                <option value="Steven Spielberg">Steven Spielberg</option>
                                <option value="Ranganathan Madhavan">Ranganathan Madhavan</option>
                                <option value="Mel Gibson">Mel Gibson</option>
                                <option value="Rawson Marshall Thurber">Rawson Marshall Thurber</option>
                                <option value="Michael Dowse">Michael Dowse</option>
                                <option value="Michael Patrick Jann">Michael Patrick Jann</option>
                                <option value="Mike Nichols">Mike Nichols</option>
                                <option value="Joel Zwick">Joel Zwick</option>
                                <option value="Jeffrey Walker">Jeffrey Walker</option>
                                <option value="Julian Farino">Julian Farino</option>
                                <option value="S.J. Clarkson">S.J. Clarkson</option>
                                <option value="Anders Engström">Anders Engström</option>
                                <option value="Mai Zetterling">Mai Zetterling</option>
                                <option value="Ed Bianchi">Ed Bianchi</option>
                                
                                <!-- Adăugați mai mulți directori în funcție de nevoile dvs. -->
                            </select>
                        </div>
                    </div>

                   

                </div>
            
        </div>

     
        

  <div style="position:relative;margin:20px">  
      {% for i in range(lungime2) %}
      <div class="panel" style="margin-left: -50px" id="movie-panel-{{ i }}">
        <div class="panel-title">
          <div class="grid-container">
            <div class="grid-item">
                <p class="movie-title"><b>{{ result_list2[i][0] }}</b></p>
                <img src="data:image/png;base64,{{ result_list2[i][6] }}" alt="Image" width="200">
            </div>
            <div class="grid-item">
                <p><b>Descriere :</b></p>
                <p>{{ result_list2[i][1] }}</p>
            </div>
            <div class="grid-item">
                <p><b>Durata: {{ result_list2[i][2] }}</b></p>
                <p><b>Anul apariției: <span class="movie-year">{{ result_list2[i][3] }}</span></b></p>
                <p class="movie-age-category"><b>Categorie vârstă: {{ result_list2[i][4] }}</b></p>
                <p class="movie-actors"><b>Actorii care participă la acest film sunt: {{ result_list2[i][5] }}</b></p>
                <p><b>Genurile filmului sunt: {{ result_list2[i][7] }}</b></p>
                <p class="movie-directors"><b>Directorul filmului este: {{ result_list2[i][8] }}</b></p>
            </div>
            <button class="add-button" data-index="{{ i }}" onclick="addToFavorites(event)">Salvează în Recomandări</button>
          </div>
        </div>      
    </div>
    {% endfor %}
  </div>


    {% for i in range(lungime3) %}
    <div class="panel" style="margin-left: -50px" id="series-panel-{{ i }}">
        <div class="panel-title">
          <div class="grid-container">
            <div class="grid-item">
                <p class="movie-title"><b>{{ result_list3[i][0] }}</b></p>
                <img src="data:image/png;base64,{{ result_list3[i][7] }}" alt="Image" width="200">
            </div>

            
            <div class="grid-item">
                <p><b>Descriere :</b></p>
                <p>{{ result_list3[i][2] }}</p>
            </div>
            <div class="grid-item">
                <p><b>Număr episoade : {{ result_list3[i][1] }}</b></p>
                <p><b>Anul apariției: <span class="movie-year">{{ result_list3[i][4] }}</span></b></p>
                <p class="movie-age-category"><b>Categorie vârstă: {{ result_list3[i][6] }}</b></p>
                <p class="movie-status"><b>Status: {{ result_list3[i][5] }}</b></p>
                <p class="movie-actors"><b>Actorii care participă la acest serial sunt: {{ result_list3[i][3] }}</b></p>
                <p><b>Genurile serialului sunt: {{ result_list3[i][9] }}</b></p>
                <p class="movie-directors"><b>Directorul serialului este: {{ result_list3[i][10] }}</b></p>
                <p class="movie-scriitorii"><b>Scriitorii serialului sunt: {{ result_list3[i][8] }}</b></p>
            </div>
            <br>
            <br>
            <button class="add-button" data-index="{{ i }}" onclick="addToFavorites1(event)">Salvează în Recomandări</button>
           
    </div>
</div>
</div>
{% endfor %}

      {% if pagination %}
        <div class="pagination-container text-center">
          <div class="pagination">
            {{ pagination.links }}
          </div>
        </div>
      {% endif %}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  function addToFavorites(event) {
    var movieIndex = event.target.dataset.index;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/add-to-favorites", true);
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4 && xhr.status === 200) {
        console.log("Movie added to favorites");
        location.reload();
      }
    };

    var data = JSON.stringify({ movieIndex: movieIndex });
    xhr.send(data);
  }
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  function addToFavorites1(event) {
    var seriesIndex = event.target.dataset.index;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/add-to-favorites1", true);
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4 && xhr.status === 200) {
        console.log("Series added to favorites");
        location.reload();
      }
    };

    var data = JSON.stringify({ seriesIndex: seriesIndex });
    xhr.send(data);
  }
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    //Filtrare dupa titlu
    $('#searchInput1').on('input', function() {
      var searchValue = $(this).val().toLowerCase();
      $('.panel').each(function() {
        var panelTitle = $(this).find('.movie-title').text().toLowerCase();
        if (panelTitle.indexOf(searchValue) > -1) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    });
  });
</script>

<style>
  .dropdown-content {
    display: none;
    position: absolute;
    z-index: 9999;
  }
</style>

<script>

  $(document).ready(function() {
    // Filter panels based on search input
    $('#searchInput2').on('input', function() {
      var searchValue = $(this).val().toLowerCase();
      $('.panel').each(function() {
        var panelYear = $(this).find('.movie-year').text().toLowerCase();
        if (panelYear.indexOf(searchValue) > -1) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    });

   

    // Toggle display of actor dropdown
    $('.dropbtn').on('click', function() {
      var dropdownContent = $(this).next('.dropdown-content');
      dropdownContent.toggle();
      $('.dropdown-content').not(dropdownContent).hide();
    });


      // Close dropdown when clicking outside
      $(document).on('click', function(e) {
      if (!$(e.target).closest('.dropdown').length) {
        $('.dropdown-content').hide();
      }
    });

    // Filter panels based on selected actors
    $('#actorDropdown').on('change', function() {
      var selectedActors = $(this).val();
      $('.panel').each(function() {
        var panelActors = $(this).find('.movie-actors').text().toLowerCase();
        var panelYear = $(this).find('.movie-year').text().toLowerCase();
        var showPanel = false;

        if (panelYear.indexOf($('#searchInput2').val().toLowerCase()) > -1) {
          for (var i = 0; i < selectedActors.length; i++) {
            if (panelActors.indexOf(selectedActors[i].toLowerCase()) > -1) {
              showPanel = true;
              break;
            }
          }
        }

        if (showPanel) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    });

    // Filter panels based on selected directors
    $('#directorDropdown').on('change', function() {
      var selectedDirectors = $(this).val();
      $('.panel').each(function() {
        var panelDirector = $(this).find('.movie-directors').text().toLowerCase();
        var panelYear = $(this).find('.movie-year').text().toLowerCase();
        var panelActors = $(this).find('.movie-actors').text().toLowerCase();
        var showPanel = false;

        if (panelYear.indexOf($('#searchInput2').val().toLowerCase()) > -1) {
          for (var i = 0; i < selectedDirectors.length; i++) {
            if (panelDirector.indexOf(selectedDirectors[i].toLowerCase()) > -1) {
              showPanel = true;
              break;
            }
          }

          if (!showPanel) {
                for (var i = 0; i < selectedDirectors.length; i++) {
                  if (panelActors.indexOf(selectedDirectors[i].toLowerCase()) > -1) {
                    showPanel = true;
                    break;
                  }
                }
            }
        }

        if (showPanel) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    });

  });
</script>

<!--
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    //Filtrare dupa an
    $('#searchInput2').on('input', function() {
      var searchValue = $(this).val().toLowerCase();
      $('.panel').each(function() {
        var panelYear = $(this).find('.movie-year').text().toLowerCase();
        if (panelYear.indexOf(searchValue) > -1) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    });
  });
</script>

<style>
    .dropdown-content {
      display: none;
      position: absolute;
      z-index: 9999;
    }
  </style>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Toggle display of actor dropdown
      $('.dropbtn').on('click', function() {
        var dropdownContent = $(this).next('.dropdown-content');
        dropdownContent.toggle();
        $('.dropdown-content').not(dropdownContent).hide();
      });
  
      // Filter panels based on selected actors
      $('#actorDropdown').on('change', function() {
        var selectedActors = $(this).val();
        $('.panel').each(function() {
          var panelActors = $(this).find('.movie-actors').text().toLowerCase();
          var showPanel = false;
          for (var i = 0; i < selectedActors.length; i++) {
            if (panelActors.indexOf(selectedActors[i].toLowerCase()) > -1) {
              showPanel = true;
              break;
            }
          }
          if (showPanel) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
  
      // Filter panels based on selected directors
      $('#directorDropdown').on('change', function() {
        var selectedDirectors = $(this).val();
        $('.panel').each(function() {
          var panelDirector = $(this).find('.movie-directors').text().toLowerCase();
          var showPanel = false;
          for (var i = 0; i < selectedDirectors.length; i++) {
            if (panelDirector.indexOf(selectedDirectors[i].toLowerCase()) > -1) {
              showPanel = true;
              break;
            }
          }
          if (showPanel) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
  
  $('#ageCategoryDropdown').on('change', function() {
    var selectedCategories = $(this).val();
    console.log(selectedCategories);
    $('.panel').each(function() {
      var panelCategory = $(this).find('.movie-age-category').text().trim();
      var showPanel = false;
      for (var i = 0; i < selectedCategories.length; i++) {
        if (panelCategory === selectedCategories[i]) {
          showPanel = true;
          break;
        }
      }
      if (showPanel) {
        $(this).show();
      } else {
        $(this).hide();
      }
    });
  });
    });

    
  </script>
  
  -->




    <!-- 
    <div style="position:relative;margin:20px">
        
        {% for i in range(lungime2) %}
        
                <div class="column" style = "font-size: 20px;">
                    <p><b>{{ result_list2[i][0] }}</b></p>
                    <img src="data:image/png;base64,{{ result_list2[i][6] }}" alt="Image" width = "200">
                </div>
                
                <div class="column" style="font-size: 15px;">
                    <br><br><br>
                    <p><b>Descriere : </b></p>
                    <p>{{ result_list2[i][1] }}</p>
                </div>
                <div class="column" style="font-size: 15px;">
                    <br><br><br>
                    <p><b>Durata : {{ result_list2[i][2] }}</b></p>
                    <p><b>Anul apariției :{{ result_list2[i][3] }} </b></p>
                    <p><b>Categorie vârstă :{{ result_list2[i][4] }} </b></p>
                    <p><b>Actorii care participă la acest film sunt : {{ result_list2[i][5] }}</b></p>
                    <p><b>Genurile filmului sunt : {{ result_list2[i][7] }}</b></p>
                    <p><b>Directorul filmului este : {{ result_list2[i][8] }}</b></p>
                </div>

            
        {% endfor %}


    </div>
 
-->
</body>
</html> 