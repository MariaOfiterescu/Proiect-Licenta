<title>{% block title  %}Formular Rezultate{% endblock %}</title>
 <!DOCTYPE html>
 <html>
 <head>
    
        
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Recomandări</title> 
        <!-- Favicon-->
        <!--<link rel="icon" type="image/x-icon" href="static/assets/favicon.ico" /> -->
        <!-- Font Awesome icons (free version)-->
        <!--<script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script> -->
        <!-- Google fonts-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" /> 
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css"
            integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp"
            crossorigin="anonymous"
        />

        
        <link

    <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" 
    crossorigin="anonymous">
    </script>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="static/css/styles.css" rel="stylesheet" /> 

        <style>
            body {
              background-image: url('/static/imagine12.png');
              background-repeat: no-repeat;
              background-size: cover;
              
            }
          </style> 
         
    
</head>



<body id="page-top">
    
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                MENU
                <i class="fas fa-bars ms-1"></i>
            </button>
        
            <div class="collapse navbar-collapse justify-content-start" id="navbarResponsive">
                <div class="d-flex">  
                    <ul class="navbar-nav">
                        <a class="nav-item nav-link align-self-start" id="home" href="/home">Acasă</a>
                        <a class="nav-item nav-link align-self-start" id="form" href="/formular">Formular</a>
                        <a class="nav-item nav-link align-self-start" id="form" href="/formular_rezultate">Recomandari</a>
                        <a class="nav-item nav-link align-self-start" id="form" href="/filme">Filme și Seriale</a>
                       <!-- <a class="nav-item nav-link align-self-start" id="logout" href="/logout">Logout</a> -->
                        
                    </ul>
                </div>
            </div>
            <div class="collapse navbar-collapse justify-content-end" id="navbarResponsive">
                <ul class="navbar-nav ">
                    
             
               {% if email %}

                    <li><a class="nav-item nav-link" id ="home" href="/logout">Delogare ({{ email }}) </a></li>
                
                {% else  %}
                    <li><a class="nav-item nav-link" id ="login">Nu sunteți logat! </a></li>
                {% endif %}
                </ul>	  
                
            </div>
        
            
           
    
       
       </div>
    </nav>

  <br><br><br><br><br><br><br>  
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                {% if category == 'error'%}
                    <div class="alert alert-danger alert-dismissible fade show">
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                         {{ message }}
                        
                    </div>
                {% else %}
                    <div class="alert alert-success alert-dismissible fade show">
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                         {{ message }}
                    </div>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endwith %} 

    <style>
        * {
          box-sizing: border-box;
        }
        
        /* Create three equal columns that floats next to each other */
        .column {
          float: left;
          width: 30%;
          padding: 10px;
          height: 500px;
        }
        
        /* Clear floats after the columns */
        .row:after {
          content: "";
          display: table;
          clear: both;
        }
    </style>
    
<div style="position:relative;margin:20px">

    {% if filme and seriale %}
            {% for i in range(lungime) %}
            
            <div class="panel" style="margin-left: -20px" id="movie-panel-{{ i }}">
                <div class="panel-title">
                  <div class="grid-container">
                    <div class="grid-item">
                        <p><b>{{ result_list[i][0] }}</b></p>
                        <img src="data:image/png;base64,{{ result_list[i][6] }}" alt="Image" width="200">
                    </div>
                    <div class="grid-item">
                        <br><br><br>
                        <p><b>Descriere :</b></p>
                        <p>{{ result_list[i][1] }}</p>
                    </div>
                    <div class="grid-item">
                        <br><br><br>
                        <p><b>Durata: {{ result_list[i][2] }}</b></p>
                        <p><b>Anul apariției: {{ result_list[i][3] }}</b></p>
                        <p><b>Categorie vârstă: {{ result_list[i][4] }}</b></p>
                        <p><b>Actorii selectați de dumneavoastră care participă la acest film sunt: {{ result_list[i][5] }}</b></p>
                    </div>
                    <br>
                    <button class="delete-button" data-index="{{ i }}" onclick="removeFromFavorites(event)">Șterge din Recomandări</button>
                </div>
            </div>
        </div>
            {% endfor %}
        {% for i in range(lungime2) %}
                
            <div class="panel" style="margin-left: -20px"  id="series-panel-{{ i }}">
                    <div class="panel-title">
                        <div class="grid-container">
                        <div class="grid-item">
                            <p><b>{{ result_list2[i][0] }}</b></p>
                            <img src="data:image/png;base64,{{ result_list2[i][7] }}" alt="Image" width="200">
                        </div>
                        <div class="grid-item">
                            <br><br><br>
                            <p><b>Descriere :</b></p>
                            <p>{{ result_list2[i][2] }}</p>
                            <p><b>Număr episoade :</b></p>
                            <p>{{ result_list2[i][1] }}</p>
                            <p><b>Status :</b></p>
                            <p>{{ result_list2[i][5] }}</p>
                        </div>
                        <div class="grid-item">
                            <br><br><br>
                            
                            <p><b>Anul apariției: {{ result_list2[i][4] }}</b></p>
                            <p><b>Categorie vârstă: {{ result_list2[i][6] }}</b></p>
                            <p><b>Actorii selectați de dumneavoastră care participă la acest film sunt: {{ result_list2[i][3] }}</b></p>
                            <p><b>Genuri: {{ result_list2[i][8] }}</b></p>
                        </div>
                        <button class="delete-button" data-index="{{ i }}" onclick="removeFromFavorites1(event)">Șterge din Recomandări</button>
                    </div>
                </div>
            </div>
    {% endfor %}
{% elif filme and not seriale %}
    {% for i in range(lungime) %}
            
            <div class="panel" style="margin-left: -20px" id="movie-panel-{{ i }}">
                <div class="panel-title">
                  <div class="grid-container">
                    <div class="grid-item">
                        <p><b>{{ result_list[i][0] }}</b></p>
                        <img src="data:image/png;base64,{{ result_list[i][6] }}" alt="Image" width="200">
                    </div>
                    <div class="grid-item">
                        <br><br><br>
                        <p><b>Descriere :</b></p>
                        <p>{{ result_list[i][1] }}</p>
                    </div>
                    <div class="grid-item">
                        <br><br><br>
                        <p><b>Durata: {{ result_list[i][2] }}</b></p>
                        <p><b>Anul apariției: {{ result_list[i][3] }}</b></p>
                        <p><b>Categorie vârstă: {{ result_list[i][4] }}</b></p>
                        <p><b>Actorii selectați de dumneavoastră care participă la acest film sunt: {{ result_list[i][5] }}</b></p>
                    </div>
                    <button class="delete-button" data-index="{{ i }}" onclick="removeFromFavorites(event)">Șterge din Recomandări</button>
                </div>
            </div>
        </div>
     {% endfor %}
{% elif not filme and seriale %}
        {% for i in range(lungime2) %}
                
            <div class="panel" style="margin-left: -20px" id="series-panel-{{ i }}">
                    <div class="panel-title">
                        <div class="grid-container">
                        <div class="grid-item">
                            <p><b>{{ result_list2[i][0] }}</b></p>
                            <img src="data:image/png;base64,{{ result_list2[i][7] }}" alt="Image" width="200">
                        </div>
                        <div class="grid-item">
                            <br><br><br>
                            <p><b>Descriere :</b></p>
                            <p>{{ result_list2[i][2] }}</p>
                            <p><b>Număr episoade :</b></p>
                            <p>{{ result_list2[i][1] }}</p>
                            <p><b>Status :</b></p>
                            <p>{{ result_list2[i][5] }}</p>
                        </div>
                        <div class="grid-item">
                            <br><br><br>
                            
                            <p><b>Anul apariției: {{ result_list2[i][4] }}</b></p>
                            <p><b>Categorie vârstă: {{ result_list2[i][6] }}</b></p>
                            <p><b>Actorii selectați de dumneavoastră care participă la acest film sunt: {{ result_list2[i][3] }}</b></p>
                            <p><b>Genuri: {{ result_list2[i][8] }}</b></p>
                        </div>
                        <button class="delete-button" data-index="{{ i }}" onclick="removeFromFavorites1(event)">Șterge din Recomandări</button>
                    </div>
                </div>
            </div>
    {% endfor %}
{% endif %}
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  function removeFromFavorites(event) {
    var movieIndex = event.target.dataset.index;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/delete-from-favorites", true);
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          console.log("Movie deleted from favorites");
          location.reload();
        } else {
          console.log("Error deleting movie from favorites");
        }
      }
    };

    var data = JSON.stringify({ movieIndex: movieIndex });
    xhr.send(data);
  }
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  function removeFromFavorites1(event) {
    var seriesIndex = event.target.dataset.index;
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/delete-from-favorites1", true);
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          console.log("Series deleted from favorites");
          location.reload();
        } else {
          console.log("Error deleting series from favorites");
        }
      }
    };

    var data = JSON.stringify({ seriesIndex: seriesIndex });
    xhr.send(data);
  }
</script>
 
    
    

    <div style="position:relative;margin:20px">


     
<!--
        {% for item in result_list %}

            <p><b>{{ item }}</b></p>

            {% for item2 in result_list2 %}

                <p><b> Descriere : </b></p>
                <p>{{ item2 }}</p>
                 {% for item3 in result_list3 %}

                    <p><b>Durata :</b> {{ item3 }}</p>
                     {% for item4 in result_list4 %}

                        <p><b>Anul apariției : </b>{{ item4 }}</p>

                        {% for item5 in result_list5 %}

                          <p><b>Categorie vârstă : </b>{{ item5 }}</p>

                                                
                        {% endfor %}

                                    
                    {% endfor %}
                     

                {% endfor %}

                
            {% endfor %} 
           
       
            {% for item6 in result_list6 %}

                <p><b>Actorii care participa la acest film sunt : </b>{{ item6 }}</p>
       

            {% endfor %}


         

        {% endfor %}   
-->  

    </div>       
    
 

</body>
</html> 